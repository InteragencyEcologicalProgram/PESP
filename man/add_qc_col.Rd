% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/global_funcs.R
\name{add_qc_col}
\alias{add_qc_col}
\title{Add quality control flags}
\usage{
add_qc_col(
  df,
  comment_col = "Comments",
  key_cols = c("Date", "Station"),
  taxa_col = "Taxon"
)
}
\arguments{
\item{df}{A dataframe containing comment and measurement columns}

\item{comment_col}{Unquoted name of the comment column to scan for quality indicators (default: \code{'Comments'})}

\item{key_cols}{Character vector of columns to group by when evaluating within-group consistency (default: \code{c('Date', 'Station')})}

\item{taxa_col}{Name of the taxon column (default: \code{'Taxon'})}
}
\value{
The original dataframe with a new or updated \code{QualityCheck} column containing
space-separated QC flags (e.g., \code{"TallyNotMet Degraded"}). Rows with no detected
issues are labeled \code{"NoCode"}.
}
\description{
Scans comment text and measurement fields to generate standardized quality control
flags for phytoplankton or similar biological datasets. Creates or overwrites a
\code{QualityCheck} column summarizing detected issues.
}
\details{
The following flags are assigned based on comment content or data checks (case-insensitive):
\itemize{
\item \strong{BadData}: contains "delete"
\item \strong{CrossContamination}: contains "cross contamination"
\item \strong{TallyNotMet_Over5}: contains "CMT > 5", "CMNT > 5", or variants
\item \strong{TallyNotMet_Under5}: contains "CMT < 5", "CMNT < 5", or variants
\item \strong{TallyNotMet}: general phrases like "did not reach", "cannot meet tally", or when both over/under flags are present
\item \strong{Degraded}: contains "degraded"
\item \strong{PoorlyPreserved}: contains "poor preservation", "weak preservation", "fungus", or "mycelial growth"
\item \strong{Obscured}: contains "obscured"
\item \strong{BrokenDiatoms}: contains "broken diatoms"
\item \strong{MucilaginousDetritus}: contains "mucilaginous detritus"
\item \strong{UnitsExceedCells}: \code{Units_per_mL} greater than \code{Cells_per_mL}
Rows with multiple issues are flagged with all applicable labels separated by spaces.
If no issues are found, \code{QualityCheck} is set to \code{"NoCode"}.
}
}
