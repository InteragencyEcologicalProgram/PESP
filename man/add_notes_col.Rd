% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/global_funcs.R
\name{add_notes_col}
\alias{add_notes_col}
\title{Extract and Standardize Taxonomic Notes}
\usage{
add_notes_col(df, comment_col = "Comments", taxa_col = "Taxon")
}
\arguments{
\item{df}{A dataframe containing taxon names and optionally a comment column}

\item{comment_col}{Unquoted name of the comment column to evaluate (default: \code{Comments})}

\item{taxa_col}{Unquoted name of the taxon column to clean (default: \code{Taxon})}
}
\value{
The input dataframe with a new \code{Notes} column summarizing detected note terms.
The function also removes these note patterns from the taxon names and attaches
a \code{log} attribute containing:
\itemize{
\item \strong{$taxa_notes}: data on taxon names where notes were removed
\item \strong{$unmatched_notes}: parenthetical terms not matched to known note patterns
}
}
\description{
Identifies and removes note-like keywords from taxon names (e.g. "cyst", "flagellate")
while recording them in a new \code{Notes} column. Also scans a
comment column for the same terms, combines both sources, and standardizes taxa that
would otherwise be left as "Unknown".
}
\details{
The following note patterns are detected (case-insensitive):
\itemize{
\item \strong{Cyst}: "cyst"
\item \strong{Secondary}: "secondary"
\item \strong{Ciliates}: "ciliates"
\item \strong{GirdleView}: "girdle", "girdle view"
\item \strong{FragmentedDiatoms}: "fragmented", "fragmented diatoms", "diatom fragment"
\item \strong{Coccoid}: "coccoid"
\item \strong{Filament}: "filament"
\item \strong{Cymbelloid}: "cymbelloid", "cymelloid"
\item \strong{Gomphonemoid}: "gomphonemoid"
\item \strong{Flagellate}: "flagellate"
}

Parenthetical expressions in taxon names are inspected for possible note content;
any unmatched content is logged for manual review. The resulting \code{Notes} column
concatenates all detected terms (space-separated) and replaces missing entries with \code{"NoNote"}.
}
